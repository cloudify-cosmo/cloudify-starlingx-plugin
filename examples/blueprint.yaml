tosca_definitions_version: cloudify_dsl_1_3

imports:
  - http://www.getcloudify.org/spec/cloudify/4.5.5/types.yaml
  - plugin:cloudify-starlingx-plugin

inputs:

  controller_uuid:
    type: string

  controller_name:
    type: string

dsl_definitions:

  client_config: &client_config
    auth_url: { get_secret: openstack_auth_url }
    username: { get_secret: openstack_username }
    api_key: { get_secret: openstack_password }
    project_name: { get_secret: openstack_project_name }
    region_name: { get_secret: openstack_region_name }

node_templates:

  system_controller:
    type: cloudify.nodes.starlingx.SystemController
    properties:
      client_config: *client_config
      resource_config:
        uuid: { get_input: controller_uuid }
        name: { get_input: controller_name }
        description: "Test description"
        system_mode: duplex